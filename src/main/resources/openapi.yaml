openapi: 3.0.3
info:
  title: Backend Chat Websocket API
  version: 0.1.0
servers:
  - url: http://localhost:8080
paths:
  /api/ping:
    get:
      tags:
        - ping
      summary: Ping the service
      operationId: getPing
      responses:
        '200':
          description: Service is reachable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PingResponse'
  /api/chat/history:
    get:
      tags:
        - chat
      summary: Get chat history
      operationId: getChatHistory
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
      responses:
        '200':
          description: Last chat messages ordered by creation time ascending
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatHistoryResponse'
  /api/chat/users:
    get:
      tags:
        - chat
      summary: Get online chat users
      operationId: getChatUsers
      responses:
        '200':
          description: Current list of online users
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatUsersResponse'
components:
  schemas:
    ChatHistoryResponse:
      type: object
      required:
        - messages
      properties:
        messages:
          type: array
          items:
            $ref: '#/components/schemas/ChatMessageResponse'
    ChatUsersResponse:
      type: object
      required:
        - users
      properties:
        users:
          type: array
          items:
            type: string
    ChatMessageResponse:
      type: object
      required:
        - id
        - authorId
        - authorName
        - text
        - createdAt
      properties:
        id:
          type: string
          example: 01J9R4ZPJ9Y4RWKBR7GZQ3FP2F
        authorId:
          type: string
          format: uuid
          example: 84ea8dfa-5f6c-4d55-9905-6558d838756e
        authorName:
          type: string
          example: alice
        text:
          type: string
          example: Hello!
        createdAt:
          type: string
          format: date-time
    PingResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          example: pong
